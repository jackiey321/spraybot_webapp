<html lang="en">
  <head>
    <!-- meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="styles/styles.css">

    <!-- scripts -->
    <script src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="scripts/robot-start.js"></script>
    <script src="scripts/pre-progress.js"></script>

    <!-- favicon -->
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">

    <title>SprayBot</title>
  </head>
  <body class="pre-map">
    <!-- map details -->
    <img class="menu" width="50" height="50" src="images/menu.png">
    <img class="pre-layers" width="50" height="50" src="images/layers-icon.png">

    <div class="alert d-flex">
      <img width="30" height="30" src="images/pre-progress/alert.png">&ensp;
      <h4 id="alert-message" class="bold mt-1">Bring robot to starting point</h4>
    </div>

    <div class="default-panel" class="container">
      <div class="swipe">
        <button class="btn btn-outline-dark panel-expand" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom"><img width="100" src="images/swipe-up.png"></button>
      </div>

      <!-- preview status -->
      <div class="offcanvas-header">
        <div class="panel-titles">
          <h6 class="offcanvas-title">Mission Status</h6>
          <h2 class="offcanvas-title font-weight-bold">Not Started</h2>
        </div>
        <h6 class="time-remaining">3 hrs 30 min left</h6>
        <button type="button" class="btn-close text-reset panel-close"></button>
      </div>
      <div class="offcanvas-body">
        <div class="progress">
          <div class="progress-bar" role="progressbar" style="width: 5%" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      </div>

      <!-- swipe up status panel -->
      <div class="offcanvas offcanvas-bottom" id="offcanvasBottom" data-bs-backdrop="false" aria-labelledby="offcanvasBottomLabel">
        <div class="swipe">
          <button class="btn btn-outline-dark panel-expand" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom"><img width="100" src="images/swipe-up.png"></button>
        </div>
        <div class="offcanvas-header">
          <div class="panel-titles">
            <h6 class="offcanvas-title">Mission Status</h6>
            <h2 class="offcanvas-title font-weight-bold">Not Started</h2>
          </div>
          <h6 class="time-remaining">3 hrs 30 min left</h6>
          <button type="button" class="btn-close text-reset panel-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <!-- mission progress -->
          <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: 5%" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100"></div>
          </div>

          <!-- robot status -->
          <div id="robot-status" class="d-flex justify-content-between">
            <div id="connectivity" class="mt-4 p-2">
              <img class="w-100" src="images/pre-progress/robot.png">
              <img class="w-100" src="images/status/connected.png">
            </div>
            <div class="mt-4 p-2 icon-status">
              <img src="images/status/battery-icon.png">
              <div class="mt-2">
                <h6 class="m-0">3 hr 47 min</h6>
                <p class="m-0">remaining</p>
              </div>
            </div>
            <div class="mt-4 p-2 icon-status">
              <img src="images/status/herb-icon.png">
              <div class="mt-2">
                <h6 class="m-0">2 hr 14 min</h6>
                <p class="m-0">remaining</p>
              </div>
            </div>
          </div>

          <!-- start mission -->
          <button id="start" class="btn btn-dark gg-button disabled mt-4 w-100" type="button" data-bs-toggle="modal" data-bs-target="#start-mission" onclick="startRobot()">Start Mission</button>
          <hr>

          <!-- spray progress -->
          <div>
            <h4>Spray Progress</h4>
            <div id="rep-blocks" class="mx-auto">
              <div class="mt-2 d-table">
                <div class="block p-3 text-center d-table-cell align-middle">
                  <p class="bold mb-1">FINISH AT</p>
                  <h5 class="bold">12:00PM</h5>
                </div>
                <div class="block p-3 text-center d-table-cell align-middle">
                  <p class="bold mb-1">FINISH AT</p>
                  <h5 class="bold">2:00PM</h5>
                </div>
                <div class="block p-3 text-center d-table-cell align-middle">
                  <p class="bold mb-1">FINISH AT</p>
                  <h5 class="bold">3:00PM</h5>
                </div>
                <div class="add-block p-3 text-center d-table-cell align-middle">
                  <img class="mb-1" width="45" src="images/pre-progress/add-block.png">
                  <h6 class="mt-1">Add Block</h6>
                </div>
              </div>
              <h5 class="mx-3">&emsp;&ensp;B30A39 ----- L14093 ----- J39W30</h5>
            </div>
          </div>
        </div>
      </div>

      <!-- start mission modal -->
      <div class="modal" id="start-mission" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-body text-center m-5">
              <h3>Congrats! <br> Mission is now in progress.</h3>
            </div>
            <div class="modal-footer justify-content-center">
              <button type="button" class="btn btn-dark long gg-button" onclick="location.href='progress.html';">Done</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- bootstrap w/ popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  </body>
</html>